require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"boot":[function(require,module,exports){
var App, Game, app, eventToMousePos,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

Game = require('game');

eventToMousePos = function(event, elem) {
  var isTouch, pos;
  if (elem === void 0) {
    elem = document.body;
  }
  isTouch = false;
  pos = {
    x: 0,
    y: 0
  };
  if (event.touches) {
    if (event.touches.length) {
      isTouch = true;
      pos.x = parseInt(event.touches[0].clientX);
      pos.y = parseInt(event.touches[0].clientY);
    }
  } else {
    pos.x = parseInt(event.clientX);
    pos.y = parseInt(event.clientY);
  }
  pos.x -= elem.clientLeft;
  pos.y -= elem.clientTop;
  return pos;
};

App = (function() {
  function App() {
    this.isPhone = !!window.cordova;
    this.isTouchSupported = indexOf.call(window, "ontouchstart") >= 0;
    this.dragging = false;
    this.boundRender = this.render.bind(this);
    this.pendingImages = 0;
    if (this.isTouchSupported) {
      this.eventNames = {
        down: 'touchstart',
        move: 'touchmove',
        up: 'touchend'
      };
    } else {
      this.eventNames = {
        down: 'mousedown',
        move: 'mousemove',
        up: 'mouseup'
      };
    }
  }

  App.prototype.onMouseDown = function(evt, elem) {
    var pos;
    this.dragging = true;
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseDown(pos.x, pos.y);
  };

  App.prototype.onMouseMove = function(evt, elem) {
    var pos;
    if (!this.dragging) {
      return;
    }
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseMove(pos.x, pos.y);
  };

  App.prototype.onMouseUp = function(evt, elem) {
    var pos;
    this.dragging = false;
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseUp(pos.x, pos.y);
  };

  App.prototype.onPause = function() {
    return console.log('onPause');
  };

  App.prototype.onResume = function() {
    return console.log('onResume');
  };

  App.prototype.render = function() {
    this.context.clearRect(0, 0, this.width, this.height);
    this.context.setTransform(1, 0, 0, 1, 0, 0);
    this.game.render();
    FastCanvas.render();
    return requestAnimationFrame((function(_this) {
      return function() {
        return _this.render();
      };
    })(this));
  };

  App.prototype.onImageLoaded = function(info) {
    this.pendingImages--;
    if (this.pendingImages === 0) {
      console.log('All images loaded. Beginning render loop.');
      return requestAnimationFrame((function(_this) {
        return function() {
          return _this.render();
        };
      })(this));
    }
  };

  App.prototype.initGraphics = function() {
    var imageName, imageUrl, ref;
    console.log("initGraphics: window size " + window.innerWidth + ", " + window.innerHeight + ", " + window.devicePixelRatio);
    this.width = window.innerWidth;
    this.height = window.innerHeight;
    this.canvas = FastCanvas.create(!window.cordova);
    this.context = this.canvas.getContext("2d");
    this.game = new Game(this.width, this.height, this.context);
    ref = this.game.images;
    for (imageName in ref) {
      imageUrl = ref[imageName];
      this.pendingImages++;
      console.log("loading image " + this.pendingImages + " '" + imageName + "': " + imageUrl);
      this.game.images[imageName] = FastCanvas.createImage();
      this.game.images[imageName].onload = this.onImageLoaded.bind(this);
      this.game.images[imageName].src = imageUrl;
    }
    return console.log("game created: " + (JSON.stringify(Object.keys(this.game))));
  };

  App.prototype.onDeviceReady = function() {
    var gameViewport, scale, viewportSettings;
    console.log('onDeviceReady');
    document.addEventListener(this.eventNames.down, this.onMouseDown.bind(this), false);
    document.addEventListener(this.eventNames.move, this.onMouseMove.bind(this), false);
    document.addEventListener(this.eventNames.up, this.onMouseUp.bind(this), false);
    gameViewport = document.getElementById('gameViewport');
    scale = 1 / window.devicePixelRatio;
    viewportSettings = "user-scalable=no, initial-scale=" + scale + ", maximum-scale=" + scale + ", minimum-scale=" + scale + ", width=device-width, height=device-height";
    console.log("viewportSettings: " + viewportSettings);
    gameViewport.setAttribute('content', viewportSettings);
    return setTimeout(this.initGraphics.bind(this), 0);
  };

  App.prototype.boot = function() {
    console.log('blackout boot()');
    if (this.isPhone) {
      document.addEventListener('deviceready', this.onDeviceReady.bind(this), false);
      document.addEventListener('pause', this.onPause.bind(this), false);
      return document.addEventListener('resume', this.onResume.bind(this), false);
    } else {
      return this.onDeviceReady();
    }
  };

  return App;

})();

app = new App;

app.boot();



},{"game":"game"}],"game":[function(require,module,exports){
var Game;

Game = (function() {
  function Game(width, height, context) {
    this.width = width;
    this.height = height;
    this.context = context;
    this.x = 100;
    this.y = 100;
    this.images = {
      logo: "img/logo.png"
    };
  }

  Game.prototype.render = function() {
    this.context.translate(this.x, this.y);
    this.context.rotate(Math.PI / 2);
    return this.context.drawImage(this.images.logo, 0, 0);
  };

  Game.prototype.mouseDown = function(x, y) {
    this.x = x;
    this.y = y;
  };

  Game.prototype.mouseMove = function(x, y) {
    this.x = x;
    this.y = y;
  };

  Game.prototype.mouseUp = function(x, y) {
    this.x = x;
    this.y = y;
  };

  return Game;

})();

module.exports = Game;



},{}]},{},[])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiRjpcXHdvcmtcXGJsYWNrb3V0XFxzcmNcXGJvb3QuY29mZmVlIiwiRjpcXHdvcmtcXGJsYWNrb3V0XFxzcmNcXGdhbWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQSwrQkFBQTtFQUFBLG1KQUFBOztBQUFBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUixDQUFQLENBQUE7O0FBQUEsZUFJQSxHQUFrQixTQUFDLEtBQUQsRUFBUSxJQUFSLEdBQUE7QUFDaEIsTUFBQSxZQUFBO0FBQUEsRUFBQSxJQUFHLElBQUEsS0FBUSxNQUFYO0FBQ0UsSUFBQSxJQUFBLEdBQU8sUUFBUSxDQUFDLElBQWhCLENBREY7R0FBQTtBQUFBLEVBR0EsT0FBQSxHQUFVLEtBSFYsQ0FBQTtBQUFBLEVBSUEsR0FBQSxHQUNFO0FBQUEsSUFBQSxDQUFBLEVBQUcsQ0FBSDtBQUFBLElBQ0EsQ0FBQSxFQUFHLENBREg7R0FMRixDQUFBO0FBUUEsRUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFUO0FBRUUsSUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBakI7QUFDRSxNQUFBLE9BQUEsR0FBVSxJQUFWLENBQUE7QUFBQSxNQUNBLEdBQUcsQ0FBQyxDQUFKLEdBQVEsUUFBQSxDQUFTLEtBQUssQ0FBQyxPQUFRLENBQUEsQ0FBQSxDQUFFLENBQUMsT0FBMUIsQ0FEUixDQUFBO0FBQUEsTUFFQSxHQUFHLENBQUMsQ0FBSixHQUFRLFFBQUEsQ0FBUyxLQUFLLENBQUMsT0FBUSxDQUFBLENBQUEsQ0FBRSxDQUFDLE9BQTFCLENBRlIsQ0FERjtLQUZGO0dBQUEsTUFBQTtBQVFFLElBQUEsR0FBRyxDQUFDLENBQUosR0FBUSxRQUFBLENBQVMsS0FBSyxDQUFDLE9BQWYsQ0FBUixDQUFBO0FBQUEsSUFDQSxHQUFHLENBQUMsQ0FBSixH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SUFBTCxJQUFDLENBQUEsSUFBRCxDQUFLLENBQVY7RUFBQSxDQWJULENBQUE7O2NBQUE7O0lBREYsQ0FBQTs7QUFBQSxNQWdCTSxDQUFDLE9BQVAsR0FBaUIsSUFoQmpCLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiR2FtZSA9IHJlcXVpcmUgJ2dhbWUnXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5ldmVudFRvTW91c2VQb3MgPSAoZXZlbnQsIGVsZW0pIC0+XHJcbiAgaWYgZWxlbSA9PSB1bmRlZmluZWRcclxuICAgIGVsZW0gPSBkb2N1bWVudC5ib2R5XHJcblxyXG4gIGlzVG91Y2ggPSBmYWxzZVxyXG4gIHBvcyA9XHJcbiAgICB4OiAwXHJcbiAgICB5OiAwXHJcblxyXG4gIGlmIGV2ZW50LnRvdWNoZXNcclxuICAgICMgdG91Y2ggc2NyZWVuIGV2ZW50c1xyXG4gICAgaWYgZXZlbnQudG91Y2hlcy5sZW5ndGhcclxuICAgICAgaXNUb3VjaCA9IHRydWVcclxuICAgICAgcG9zLnggPSBwYXJzZUludCBldmVudC50b3VjaGVzWzBdLmNsaWVudFhcclxuICAgICAgcG9zLnkgPSBwYXJzZUludCBldmVudC50b3VjaGVzWzBdLmNsaWVudFlcclxuICBlbHNlXHJcbiAgICAjIG1vdXNlIGV2ZW50c1xyXG4gICAgcG9zLnggPSBwYXJzZUludChldmVudC5jbGllbnRYKVxyXG4gICAgcG9zLnkgPSBwYXJzZUludChldmVudC5jbGllbnRZKVxyXG5cclxuICAjIGFjY291bnRzIGZvciBib3JkZXJcclxuICBwb3MueCAtPSBlbGVtLmNsaWVudExlZnRcclxuICBwb3MueSAtPSBlbGVtLmNsaWVudFRvcFxyXG5cclxuICByZXR1cm4gcG9zXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5jbGFzcyBBcHBcclxuICBjb25zdHJ1Y3RvcjogLT5cclxuICAgIEBpc1Bob25lID0gISF3aW5kb3cuY29yZG92YVxyXG4gICAgQGlzVG91Y2hTdXBwb3J0ZWQgPSBcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvd1xyXG4gICAgQGRyYWdnaW5nID0gZmFsc2VcclxuICAgIEBib3VuZFJlbmRlciA9IEByZW5kZXIuYmluZCh0aGlzKVxyXG4gICAgQHBlbmRpbmdJbWFnZXMgPSAwXHJcbiAgICBpZiBAaXNUb3VjaFN1cHBvcnRlZFxyXG4gICAgICBAZXZlbnROYW1lcyA9XHJcbiAgICAgICAgZG93bjogJ3RvdWNoc3RhcnQnXHJcbiAgICAgICAgbW92ZTogJ3RvdWNobW92ZSdcclxuICAgICAgICB1cDogICAndG91Y2hlbmQnXHJcbiAgICBlbHNlXHJcbiAgICAgIEBldmVudE5hbWVzID1cclxuICAgICAgICBkb3duOiAnbW91c2Vkb3duJ1xyXG4gICAgICAgIG1vdmU6ICdtb3VzZW1vdmUnXHJcbiAgICAgICAgdXA6ICAgJ21vdXNldXAnXHJcblxyXG4gIG9uTW91c2VEb3duOiAoZXZ0LCBlbGVtKSAtPlxyXG4gICAgQGRyYWdnaW5nID0gdHJ1ZVxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcclxuICAgIHBvcyA9IGV2ZW50VG9Nb3VzZVBvcyhldnQsIGVsZW0pXHJcbiAgICBAZ2FtZS5tb3VzZURvd24gcG9zLngsIHBvcy55XHJcblxyXG4gIG9uTW91c2VNb3ZlOiAoZXZ0LCBlbGVtKSAtPlxyXG4gICAgcmV0dXJuIGlmIG5vdCBAZHJhZ2dpbmdcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBwb3MgPSBldmVudFRvTW91c2VQb3MoZXZ0LCBlbGVtKVxyXG4gICAgQGdhbWUubW91c2VNb3ZlIHBvcy54LCBwb3MueVxyXG5cclxuICBvbk1vdXNlVXA6IChldnQsIGVsZW0pIC0+XHJcbiAgICBAZHJhZ2dpbmcgPSBmYWxzZVxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcclxuICAgIHBvcyA9IGV2ZW50VG9Nb3VzZVBvcyhldnQsIGVsZW0pXHJcbiAgICBAZ2FtZS5tb3VzZVVwIHBvcy54LCBwb3MueVxyXG5cclxuICBvblBhdXNlOiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ29uUGF1c2UnXHJcblxyXG4gIG9uUmVzdW1lOiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ29uUmVzdW1lJ1xyXG5cclxuICByZW5kZXI6IC0+XHJcbiAgICBAY29udGV4dC5jbGVhclJlY3QgMCwgMCwgQHdpZHRoLCBAaGVpZ2h0XHJcbiAgICBAY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMClcclxuICAgIEBnYW1lLnJlbmRlcigpXHJcbiAgICBGYXN0Q2FudmFzLnJlbmRlcigpXHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0+IEByZW5kZXIoKVxyXG5cclxuICBvbkltYWdlTG9hZGVkOiAoaW5mbykgLT5cclxuICAgIEBwZW5kaW5nSW1hZ2VzLS1cclxuICAgIGlmIEBwZW5kaW5nSW1hZ2VzID09IDBcclxuICAgICAgY29uc29sZS5sb2cgJ0FsbCBpbWFnZXMgbG9hZGVkLiBCZWdpbm5pbmcgcmVuZGVyIGxvb3AuJ1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT4gQHJlbmRlcigpXHJcblxyXG4gIGluaXRHcmFwaGljczogLT5cclxuICAgIGNvbnNvbGUubG9nIFwiaW5pdEdyYXBoaWNzOiB3aW5kb3cgc2l6ZSAje3dpbmRvdy5pbm5lcldpZHRofSwgI3t3aW5kb3cuaW5uZXJIZWlnaHR9LCAje3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfVwiXHJcbiAgICBAd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxyXG4gICAgQGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgQGNhbnZhcyA9IEZhc3RDYW52YXMuY3JlYXRlICF3aW5kb3cuY29yZG92YVxyXG4gICAgQGNvbnRleHQgPSBAY2FudmFzLmdldENvbnRleHQgXCIyZFwiXHJcbiAgICBAZ2FtZSA9IG5ldyBHYW1lIEB3aWR0aCwgQGhlaWdodCwgQGNvbnRleHRcclxuICAgIGZvciBpbWFnZU5hbWUsIGltYWdlVXJsIG9mIEBnYW1lLmltYWdlc1xyXG4gICAgICBAcGVuZGluZ0ltYWdlcysrXHJcbiAgICAgIGNvbnNvbGUubG9nIFwibG9hZGluZyBpbWFnZSAje0BwZW5kaW5nSW1hZ2VzfSAnI3tpbWFnZU5hbWV9JzogI3tpbWFnZVVybH1cIlxyXG4gICAgICBAZ2FtZS5pbWFnZXNbaW1hZ2VOYW1lXSA9IEZhc3RDYW52YXMuY3JlYXRlSW1hZ2UoKVxyXG4gICAgICBAZ2FtZS5pbWFnZXNbaW1hZ2VOYW1lXS5vbmxvYWQgPSBAb25JbWFnZUxvYWRlZC5iaW5kKHRoaXMpXHJcbiAgICAgIEBnYW1lLmltYWdlc1tpbWFnZU5hbWVdLnNyYyA9IGltYWdlVXJsXHJcbiAgICBjb25zb2xlLmxvZyBcImdhbWUgY3JlYXRlZDogI3tKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhAZ2FtZSkpfVwiXHJcblxyXG4gIG9uRGV2aWNlUmVhZHk6IC0+XHJcbiAgICBjb25zb2xlLmxvZyAnb25EZXZpY2VSZWFkeSdcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgQGV2ZW50TmFtZXMuZG93biwgQG9uTW91c2VEb3duLmJpbmQodGhpcyksIGZhbHNlXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIEBldmVudE5hbWVzLm1vdmUsIEBvbk1vdXNlTW92ZS5iaW5kKHRoaXMpLCBmYWxzZVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciBAZXZlbnROYW1lcy51cCwgICBAb25Nb3VzZVVwLmJpbmQodGhpcyksICAgZmFsc2VcclxuXHJcbiAgICAjIHRoaXMgZm9yY2VzIEFuZHJvaWQncyBXZWJWaWV3IHRvIG5vdCBkbyBkdW1iIHRoaW5ncyB3aXRoIHNjYWxlXHJcbiAgICBnYW1lVmlld3BvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZVZpZXdwb3J0JylcclxuICAgIHNjYWxlID0gMSAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXHJcbiAgICB2aWV3cG9ydFNldHRpbmdzID0gXCJ1c2VyLXNjYWxhYmxlPW5vLCBpbml0aWFsLXNjYWxlPSN7c2NhbGV9LCBtYXhpbXVtLXNjYWxlPSN7c2NhbGV9LCBtaW5pbXVtLXNjYWxlPSN7c2NhbGV9LCB3aWR0aD1kZXZpY2Utd2lkdGgsIGhlaWdodD1kZXZpY2UtaGVpZ2h0XCJcclxuICAgIGNvbnNvbGUubG9nIFwidmlld3BvcnRTZXR0aW5nczogI3t2aWV3cG9ydFNldHRpbmdzfVwiXHJcbiAgICBnYW1lVmlld3BvcnQuc2V0QXR0cmlidXRlICdjb250ZW50Jywgdmlld3BvcnRTZXR0aW5nc1xyXG5cclxuICAgIHNldFRpbWVvdXQoQGluaXRHcmFwaGljcy5iaW5kKHRoaXMpLCAwKVxyXG5cclxuICBib290OiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ2JsYWNrb3V0IGJvb3QoKSdcclxuICAgIGlmIEBpc1Bob25lXHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2RldmljZXJlYWR5JywgQG9uRGV2aWNlUmVhZHkuYmluZCh0aGlzKSwgZmFsc2VcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAncGF1c2UnLCBAb25QYXVzZS5iaW5kKHRoaXMpLCBmYWxzZVxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdyZXN1bWUnLCBAb25SZXN1bWUuYmluZCh0aGlzKSwgZmFsc2VcclxuICAgIGVsc2VcclxuICAgICAgQG9uRGV2aWNlUmVhZHkoKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuYXBwID0gbmV3IEFwcFxyXG5hcHAuYm9vdCgpXHJcbiIsIlxyXG5jbGFzcyBHYW1lXHJcbiAgY29uc3RydWN0b3I6IChAd2lkdGgsIEBoZWlnaHQsIEBjb250ZXh0KSAtPlxyXG4gICAgQHggPSAxMDBcclxuICAgIEB5ID0gMTAwXHJcbiAgICBAaW1hZ2VzID1cclxuICAgICAgbG9nbzogXCJpbWcvbG9nby5wbmdcIlxyXG5cclxuICByZW5kZXI6IC0+XHJcbiAgICBAY29udGV4dC50cmFuc2xhdGUgQHgsIEB5XHJcbiAgICBAY29udGV4dC5yb3RhdGUgTWF0aC5QSSAvIDJcclxuICAgIEBjb250ZXh0LmRyYXdJbWFnZSBAaW1hZ2VzLmxvZ28sIDAsIDBcclxuXHJcbiAgbW91c2VEb3duOiAoQHgsIEB5KSAtPlxyXG4gIG1vdXNlTW92ZTogKEB4LCBAeSkgLT5cclxuICBtb3VzZVVwOiAoQHgsIEB5KSAtPlxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lXHJcbiJdfQ==
