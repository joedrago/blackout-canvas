require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"boot":[function(require,module,exports){
var App, Game, app, eventToMousePos;

Game = require('game');

eventToMousePos = function(event, elem) {
  var isTouch, pos;
  if (elem === void 0) {
    elem = document.body;
  }
  isTouch = false;
  pos = {
    x: 0,
    y: 0
  };
  if (event.touches) {
    if (event.touches.length) {
      isTouch = true;
      pos.x = parseInt(event.touches[0].clientX);
      pos.y = parseInt(event.touches[0].clientY);
    }
  } else {
    pos.x = parseInt(event.clientX);
    pos.y = parseInt(event.clientY);
  }
  pos.x -= elem.clientLeft;
  pos.y -= elem.clientTop;
  return pos;
};

App = (function() {
  function App() {
    this.isPhone = !!window.cordova;
    console.log(JSON.stringify(Object.keys(window)));
    this.isTouchSupported = window.ontouchstart !== void 0;
    this.dragging = false;
    this.pendingImages = 0;
    if (this.isTouchSupported) {
      console.log("using touch events");
      this.eventNames = {
        down: 'touchstart',
        move: 'touchmove',
        up: 'touchend'
      };
    } else {
      console.log("using mouse events");
      this.eventNames = {
        down: 'mousedown',
        move: 'mousemove',
        up: 'mouseup'
      };
    }
  }

  App.prototype.onMouseDown = function(evt, elem) {
    var pos;
    this.dragging = true;
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseDown(pos.x, pos.y);
  };

  App.prototype.onMouseMove = function(evt, elem) {
    var pos;
    if (!this.dragging) {
      return;
    }
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseMove(pos.x, pos.y);
  };

  App.prototype.onMouseUp = function(evt, elem) {
    var pos;
    this.dragging = false;
    evt.preventDefault();
    pos = eventToMousePos(evt, elem);
    return this.game.mouseUp(pos.x, pos.y);
  };

  App.prototype.onPause = function() {
    return console.log('onPause');
  };

  App.prototype.onResume = function() {
    return console.log('onResume');
  };

  App.prototype.render = function() {
    this.context.clearRect(0, 0, this.width, this.height);
    this.context.setTransform(1, 0, 0, 1, 0, 0);
    this.game.render();
    FastCanvas.render();
    return requestAnimationFrame((function(_this) {
      return function() {
        return _this.render();
      };
    })(this));
  };

  App.prototype.onImageLoaded = function(info) {
    this.pendingImages--;
    if (this.pendingImages === 0) {
      console.log('All images loaded. Beginning render loop.');
      return requestAnimationFrame((function(_this) {
        return function() {
          return _this.render();
        };
      })(this));
    }
  };

  App.prototype.initGraphics = function() {
    var imageName, imageUrl, ref;
    console.log("initGraphics: window size " + window.innerWidth + ", " + window.innerHeight + ", " + window.devicePixelRatio);
    this.width = window.innerWidth;
    this.height = window.innerHeight;
    this.canvas = FastCanvas.create(!window.cordova);
    this.context = this.canvas.getContext("2d");
    this.game = new Game(this.width, this.height, this.context);
    ref = this.game.images;
    for (imageName in ref) {
      imageUrl = ref[imageName];
      this.pendingImages++;
      console.log("loading image " + this.pendingImages + " '" + imageName + "': " + imageUrl);
      this.game.images[imageName] = FastCanvas.createImage();
      this.game.images[imageName].onload = this.onImageLoaded.bind(this);
      this.game.images[imageName].src = imageUrl;
    }
    return console.log("game created: " + (JSON.stringify(Object.keys(this.game))));
  };

  App.prototype.onDeviceReady = function() {
    var gameViewport, scale, viewportSettings;
    console.log('onDeviceReady');
    document.addEventListener(this.eventNames.down, this.onMouseDown.bind(this), false);
    document.addEventListener(this.eventNames.move, this.onMouseMove.bind(this), false);
    document.addEventListener(this.eventNames.up, this.onMouseUp.bind(this), false);
    gameViewport = document.getElementById('gameViewport');
    scale = 1 / window.devicePixelRatio;
    viewportSettings = "user-scalable=no, initial-scale=" + scale + ", maximum-scale=" + scale + ", minimum-scale=" + scale + ", width=device-width, height=device-height";
    console.log("viewportSettings: " + viewportSettings);
    gameViewport.setAttribute('content', viewportSettings);
    return setTimeout(this.initGraphics.bind(this), 0);
  };

  App.prototype.boot = function() {
    console.log('blackout boot()');
    if (this.isPhone) {
      document.addEventListener('deviceready', this.onDeviceReady.bind(this), false);
      document.addEventListener('pause', this.onPause.bind(this), false);
      return document.addEventListener('resume', this.onResume.bind(this), false);
    } else {
      return this.onDeviceReady();
    }
  };

  return App;

})();

app = new App;

app.boot();



},{"game":"game"}],"game":[function(require,module,exports){
var Game;

Game = (function() {
  function Game(width, height, context) {
    this.width = width;
    this.height = height;
    this.context = context;
    this.x = 100;
    this.y = 100;
    this.images = {
      logo: "img/logo.png"
    };
  }

  Game.prototype.render = function() {
    this.context.translate(this.x, this.y);
    this.context.rotate(Math.PI / 2);
    return this.context.drawImage(this.images.logo, 0, 0);
  };

  Game.prototype.mouseDown = function(x1, y1) {
    this.x = x1;
    this.y = y1;
  };

  Game.prototype.mouseMove = function(x1, y1) {
    this.x = x1;
    this.y = y1;
  };

  Game.prototype.mouseUp = function(x, y) {};

  return Game;

})();

module.exports = Game;



},{}]},{},[])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiRjpcXHdvcmtcXGJsYWNrb3V0XFxzcmNcXGJvb3QuY29mZmVlIiwiRjpcXHdvcmtcXGJsYWNrb3V0XFxzcmNcXGdhbWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQSwrQkFBQTs7QUFBQSxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVIsQ0FBUCxDQUFBOztBQUFBLGVBSUEsR0FBa0IsU0FBQyxLQUFELEVBQVEsSUFBUixHQUFBO0FBQ2hCLE1BQUEsWUFBQTtBQUFBLEVBQUEsSUFBRyxJQUFBLEtBQVEsTUFBWDtBQUNFLElBQUEsSUFBQSxHQUFPLFFBQVEsQ0FBQyxJQUFoQixDQURGO0dBQUE7QUFBQSxFQUdBLE9BQUEsR0FBVSxLQUhWLENBQUE7QUFBQSxFQUlBLEdBQUEsR0FDRTtBQUFBLElBQUEsQ0FBQSxFQUFHLENBQUg7QUFBQSxJQUNBLENBQUEsRUFBRyxDQURIO0dBTEYsQ0FBQTtBQVFBLEVBQUEsSUFBRyxLQUFLLENBQUMsT0FBVDtBQUVFLElBQUEsSUFBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQWpCO0FBQ0UsTUFBQSxPQUFBLEdBQVUsSUFBVixDQUFBO0FBQUEsTUFDQSxHQUFHLENBQUMsQ0FBSixHQUFRLFFBQUEsQ0FBUyxLQUFLLENBQUMsT0FBUSxDQUFBLENBQUEsQ0FBRSxDQUFDLE9BQTFCLENBRFIsQ0FBQTtBQUFBLE1BRUEsR0FBRyxDQUFDLENBQUosR0FBUSxRQUFBLENBQVMsS0FBSyxDQUFDLE9BQVEsQ0FBQSxDQUFBLENBQUUsQ0FBQyxPQUExQixDQUZSLENBREY7S0FGRjtHQUFBLE1BQUE7QUFRRSxJQUFBLEdBQUcsQ0FBQyxDQUFKLEdBQVEsUUFBQSxDQUFTLEtBQUssQ0FBQyxPQUFmLENBQVIsQ0FBQTtBQUFBLElBQ0EsR0FBRyxDQUFDLENBQUosR0FBUSxRQUFBLENB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QUEsQ0FaWCxDQUFBOztBQUFBLGlCQWFBLE9BQUEsR0FBUyxTQUFDLENBQUQsRUFBSSxDQUFKLEdBQUEsQ0FiVCxDQUFBOztjQUFBOztJQURGLENBQUE7O0FBQUEsTUFnQk0sQ0FBQyxPQUFQLEdBQWlCLElBaEJqQixDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIkdhbWUgPSByZXF1aXJlICdnYW1lJ1xyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXZlbnRUb01vdXNlUG9zID0gKGV2ZW50LCBlbGVtKSAtPlxyXG4gIGlmIGVsZW0gPT0gdW5kZWZpbmVkXHJcbiAgICBlbGVtID0gZG9jdW1lbnQuYm9keVxyXG5cclxuICBpc1RvdWNoID0gZmFsc2VcclxuICBwb3MgPVxyXG4gICAgeDogMFxyXG4gICAgeTogMFxyXG5cclxuICBpZiBldmVudC50b3VjaGVzXHJcbiAgICAjIHRvdWNoIHNjcmVlbiBldmVudHNcclxuICAgIGlmIGV2ZW50LnRvdWNoZXMubGVuZ3RoXHJcbiAgICAgIGlzVG91Y2ggPSB0cnVlXHJcbiAgICAgIHBvcy54ID0gcGFyc2VJbnQgZXZlbnQudG91Y2hlc1swXS5jbGllbnRYXHJcbiAgICAgIHBvcy55ID0gcGFyc2VJbnQgZXZlbnQudG91Y2hlc1swXS5jbGllbnRZXHJcbiAgZWxzZVxyXG4gICAgIyBtb3VzZSBldmVudHNcclxuICAgIHBvcy54ID0gcGFyc2VJbnQoZXZlbnQuY2xpZW50WClcclxuICAgIHBvcy55ID0gcGFyc2VJbnQoZXZlbnQuY2xpZW50WSlcclxuXHJcbiAgIyBhY2NvdW50cyBmb3IgYm9yZGVyXHJcbiAgcG9zLnggLT0gZWxlbS5jbGllbnRMZWZ0XHJcbiAgcG9zLnkgLT0gZWxlbS5jbGllbnRUb3BcclxuXHJcbiAgcmV0dXJuIHBvc1xyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuY2xhc3MgQXBwXHJcbiAgY29uc3RydWN0b3I6IC0+XHJcbiAgICBAaXNQaG9uZSA9ICEhd2luZG93LmNvcmRvdmFcclxuICAgIGNvbnNvbGUubG9nIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHdpbmRvdykpXHJcbiAgICBAaXNUb3VjaFN1cHBvcnRlZCA9ICh3aW5kb3cub250b3VjaHN0YXJ0ICE9IHVuZGVmaW5lZClcclxuICAgIEBkcmFnZ2luZyA9IGZhbHNlXHJcbiAgICBAcGVuZGluZ0ltYWdlcyA9IDBcclxuICAgIGlmIEBpc1RvdWNoU3VwcG9ydGVkXHJcbiAgICAgIGNvbnNvbGUubG9nIFwidXNpbmcgdG91Y2ggZXZlbnRzXCJcclxuICAgICAgQGV2ZW50TmFtZXMgPVxyXG4gICAgICAgIGRvd246ICd0b3VjaHN0YXJ0J1xyXG4gICAgICAgIG1vdmU6ICd0b3VjaG1vdmUnXHJcbiAgICAgICAgdXA6ICAgJ3RvdWNoZW5kJ1xyXG4gICAgZWxzZVxyXG4gICAgICBjb25zb2xlLmxvZyBcInVzaW5nIG1vdXNlIGV2ZW50c1wiXHJcbiAgICAgIEBldmVudE5hbWVzID1cclxuICAgICAgICBkb3duOiAnbW91c2Vkb3duJ1xyXG4gICAgICAgIG1vdmU6ICdtb3VzZW1vdmUnXHJcbiAgICAgICAgdXA6ICAgJ21vdXNldXAnXHJcblxyXG4gIG9uTW91c2VEb3duOiAoZXZ0LCBlbGVtKSAtPlxyXG4gICAgQGRyYWdnaW5nID0gdHJ1ZVxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcclxuICAgIHBvcyA9IGV2ZW50VG9Nb3VzZVBvcyhldnQsIGVsZW0pXHJcbiAgICBAZ2FtZS5tb3VzZURvd24gcG9zLngsIHBvcy55XHJcblxyXG4gIG9uTW91c2VNb3ZlOiAoZXZ0LCBlbGVtKSAtPlxyXG4gICAgcmV0dXJuIGlmIG5vdCBAZHJhZ2dpbmdcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBwb3MgPSBldmVudFRvTW91c2VQb3MoZXZ0LCBlbGVtKVxyXG4gICAgQGdhbWUubW91c2VNb3ZlIHBvcy54LCBwb3MueVxyXG5cclxuICBvbk1vdXNlVXA6IChldnQsIGVsZW0pIC0+XHJcbiAgICBAZHJhZ2dpbmcgPSBmYWxzZVxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcclxuICAgIHBvcyA9IGV2ZW50VG9Nb3VzZVBvcyhldnQsIGVsZW0pXHJcbiAgICBAZ2FtZS5tb3VzZVVwIHBvcy54LCBwb3MueVxyXG5cclxuICBvblBhdXNlOiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ29uUGF1c2UnXHJcblxyXG4gIG9uUmVzdW1lOiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ29uUmVzdW1lJ1xyXG5cclxuICByZW5kZXI6IC0+XHJcbiAgICBAY29udGV4dC5jbGVhclJlY3QgMCwgMCwgQHdpZHRoLCBAaGVpZ2h0XHJcbiAgICBAY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMClcclxuICAgIEBnYW1lLnJlbmRlcigpXHJcbiAgICBGYXN0Q2FudmFzLnJlbmRlcigpXHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0+IEByZW5kZXIoKVxyXG5cclxuICBvbkltYWdlTG9hZGVkOiAoaW5mbykgLT5cclxuICAgIEBwZW5kaW5nSW1hZ2VzLS1cclxuICAgIGlmIEBwZW5kaW5nSW1hZ2VzID09IDBcclxuICAgICAgY29uc29sZS5sb2cgJ0FsbCBpbWFnZXMgbG9hZGVkLiBCZWdpbm5pbmcgcmVuZGVyIGxvb3AuJ1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT4gQHJlbmRlcigpXHJcblxyXG4gIGluaXRHcmFwaGljczogLT5cclxuICAgIGNvbnNvbGUubG9nIFwiaW5pdEdyYXBoaWNzOiB3aW5kb3cgc2l6ZSAje3dpbmRvdy5pbm5lcldpZHRofSwgI3t3aW5kb3cuaW5uZXJIZWlnaHR9LCAje3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfVwiXHJcbiAgICBAd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxyXG4gICAgQGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgQGNhbnZhcyA9IEZhc3RDYW52YXMuY3JlYXRlICF3aW5kb3cuY29yZG92YVxyXG4gICAgQGNvbnRleHQgPSBAY2FudmFzLmdldENvbnRleHQgXCIyZFwiXHJcbiAgICBAZ2FtZSA9IG5ldyBHYW1lIEB3aWR0aCwgQGhlaWdodCwgQGNvbnRleHRcclxuICAgIGZvciBpbWFnZU5hbWUsIGltYWdlVXJsIG9mIEBnYW1lLmltYWdlc1xyXG4gICAgICBAcGVuZGluZ0ltYWdlcysrXHJcbiAgICAgIGNvbnNvbGUubG9nIFwibG9hZGluZyBpbWFnZSAje0BwZW5kaW5nSW1hZ2VzfSAnI3tpbWFnZU5hbWV9JzogI3tpbWFnZVVybH1cIlxyXG4gICAgICBAZ2FtZS5pbWFnZXNbaW1hZ2VOYW1lXSA9IEZhc3RDYW52YXMuY3JlYXRlSW1hZ2UoKVxyXG4gICAgICBAZ2FtZS5pbWFnZXNbaW1hZ2VOYW1lXS5vbmxvYWQgPSBAb25JbWFnZUxvYWRlZC5iaW5kKHRoaXMpXHJcbiAgICAgIEBnYW1lLmltYWdlc1tpbWFnZU5hbWVdLnNyYyA9IGltYWdlVXJsXHJcbiAgICBjb25zb2xlLmxvZyBcImdhbWUgY3JlYXRlZDogI3tKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhAZ2FtZSkpfVwiXHJcblxyXG4gIG9uRGV2aWNlUmVhZHk6IC0+XHJcbiAgICBjb25zb2xlLmxvZyAnb25EZXZpY2VSZWFkeSdcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgQGV2ZW50TmFtZXMuZG93biwgQG9uTW91c2VEb3duLmJpbmQodGhpcyksIGZhbHNlXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIEBldmVudE5hbWVzLm1vdmUsIEBvbk1vdXNlTW92ZS5iaW5kKHRoaXMpLCBmYWxzZVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciBAZXZlbnROYW1lcy51cCwgICBAb25Nb3VzZVVwLmJpbmQodGhpcyksICAgZmFsc2VcclxuXHJcbiAgICAjIHRoaXMgZm9yY2VzIEFuZHJvaWQncyBXZWJWaWV3IHRvIG5vdCBkbyBkdW1iIHRoaW5ncyB3aXRoIHNjYWxlXHJcbiAgICBnYW1lVmlld3BvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZVZpZXdwb3J0JylcclxuICAgIHNjYWxlID0gMSAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXHJcbiAgICB2aWV3cG9ydFNldHRpbmdzID0gXCJ1c2VyLXNjYWxhYmxlPW5vLCBpbml0aWFsLXNjYWxlPSN7c2NhbGV9LCBtYXhpbXVtLXNjYWxlPSN7c2NhbGV9LCBtaW5pbXVtLXNjYWxlPSN7c2NhbGV9LCB3aWR0aD1kZXZpY2Utd2lkdGgsIGhlaWdodD1kZXZpY2UtaGVpZ2h0XCJcclxuICAgIGNvbnNvbGUubG9nIFwidmlld3BvcnRTZXR0aW5nczogI3t2aWV3cG9ydFNldHRpbmdzfVwiXHJcbiAgICBnYW1lVmlld3BvcnQuc2V0QXR0cmlidXRlICdjb250ZW50Jywgdmlld3BvcnRTZXR0aW5nc1xyXG5cclxuICAgIHNldFRpbWVvdXQoQGluaXRHcmFwaGljcy5iaW5kKHRoaXMpLCAwKVxyXG5cclxuICBib290OiAtPlxyXG4gICAgY29uc29sZS5sb2cgJ2JsYWNrb3V0IGJvb3QoKSdcclxuICAgIGlmIEBpc1Bob25lXHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2RldmljZXJlYWR5JywgQG9uRGV2aWNlUmVhZHkuYmluZCh0aGlzKSwgZmFsc2VcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAncGF1c2UnLCBAb25QYXVzZS5iaW5kKHRoaXMpLCBmYWxzZVxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdyZXN1bWUnLCBAb25SZXN1bWUuYmluZCh0aGlzKSwgZmFsc2VcclxuICAgIGVsc2VcclxuICAgICAgQG9uRGV2aWNlUmVhZHkoKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuYXBwID0gbmV3IEFwcFxyXG5hcHAuYm9vdCgpXHJcbiIsIlxyXG5jbGFzcyBHYW1lXHJcbiAgY29uc3RydWN0b3I6IChAd2lkdGgsIEBoZWlnaHQsIEBjb250ZXh0KSAtPlxyXG4gICAgQHggPSAxMDBcclxuICAgIEB5ID0gMTAwXHJcbiAgICBAaW1hZ2VzID1cclxuICAgICAgbG9nbzogXCJpbWcvbG9nby5wbmdcIlxyXG5cclxuICByZW5kZXI6IC0+XHJcbiAgICBAY29udGV4dC50cmFuc2xhdGUgQHgsIEB5XHJcbiAgICBAY29udGV4dC5yb3RhdGUgTWF0aC5QSSAvIDJcclxuICAgIEBjb250ZXh0LmRyYXdJbWFnZSBAaW1hZ2VzLmxvZ28sIDAsIDBcclxuXHJcbiAgbW91c2VEb3duOiAoQHgsIEB5KSAtPlxyXG4gIG1vdXNlTW92ZTogKEB4LCBAeSkgLT5cclxuICBtb3VzZVVwOiAoeCwgeSkgLT5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZVxyXG4iXX0=
